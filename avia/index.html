<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Avia tickets - search form</title>
</head>
<body>
    <h1>Avia tickets:</h1>

    <div data-bind="visible: !isShowResult()" style="display:none">
        <form data-bind="submit: findTicketList">
            <fieldset>
                Departure point:
                <select name="departure-point" data-bind="options: ActualAirportList, optionsText: 'Name', optionsValue: 'Abbr', value: DepartureAbbr, optionsCaption: 'select...'"></select>
            </fieldset>
            <fieldset>
                Arrival point:
                <select name="arrival-point" data-bind="options: ActualAirportList, optionsText: 'Name', optionsValue: 'Abbr', value: ArrivalAbbr, optionsCaption: 'select...'"></select>
            </fieldset>
            <div data-bind="foreach: TicketViewList">
                <label><input name="ticket-view" type="radio" data-bind="value: Id, checked: $parent.SelectedTicketViewId" /><span data-bind="text: Name"></span></label>
            </div>
            <input type="submit" value="Find" data-bind="enable: IsValidSearchForm" />
        </form>
    </div>

    <!-- isShowTicketList: when all required search fields is not empty -->
    <div data-bind="if: isShowResult">
        <!-- show search form and leave all fields the same -->
        <button type="button" data-bind="click: function(){ isShowResult(false); }">Вернуться к форме поиска</button>

        <div data-bind="template: { name: SelectedTicketViewId(), templateUrl: 'template', templatePrefix: 'ticket-view-', templateSuffix: '.tmpl.html' }"></div>

        <div data-bind="template: { name: 'ticket-filter', templateUrl: 'template', templateSuffix: '.tmpl.html' }"></div>
    </div>

    <script src="/scripts/json2.min.js"></script>
    <script src="/scripts/jquery-2.0.3.min.js"></script>
    <script src="/scripts/history-js/history.adapter.jquery.js"></script>
    <!--<script src="/scripts/history-js/history.html4.js"></script>-->
    <script src="/scripts/history-js/history.js"></script>
    <script src="/scripts/knockout-2.3.0.js"></script>

    <!-- Contains three libs below -->
    <script src="/scripts/koExternalTemplateEngine_all.min.js"></script>
    <!-- Simple js lib to prevent multiple simultaneous client requests to same HTTP endpoint. For external knockout templates -->
    <!--<script src="/scripts/TrafficCop.min.js"></script>-->
    <!-- For pulling external templates & other content asynchronously/synchronously. For external knockout templates -->
    <!--<script src="/scripts/infuser.min.js"></script>-->
    <!-- Custom Template Engine and Template Source for Knockout.js that loads external templates. Supports native and jQuery templates. -->
    <!--<script src="/scripts/koExternalTemplateEngine.min.js"></script>-->

    <script src="/scripts/app/avia/datacontext.js"></script>
    <script src="/scripts/app/avia/model.js"></script>
    <script src="/scripts/app/avia/view-model.js"></script>
</body>
</html>
