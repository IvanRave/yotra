var app=angular.module("project",["geodata","yotraFilters"]),wamsClient=new WindowsAzure.MobileServiceClient("https://rave-mobile.azure-mobile.net/","cJVLPsElKKsvBvtlYLKJwPgBzkFPmk65"),LoginPartialCtrl;sessionStorage.applicationKey=wamsClient.applicationKey,sessionStorage.version=wamsClient.version,console.log(wamsClient),LoginPartialCtrl=["$scope",function(n){sessionStorage.currentUser&&(n.currentUser=JSON.parse(sessionStorage.currentUser)),n.logOnWithFacebook=function(){wamsClient.login("facebook").then(function(t){sessionStorage.currentUser=JSON.stringify(t),console.log(sessionStorage),console.log(t),n.$$phase||n.$apply(function(){n.currentUser=t})},function(n){console.log(n)})}}],app.config(["$routeProvider",function(n){var t=["$scope","GeoData",function(n,t){n.geoForm={pointList:t.query()}}],i=["$scope","$location","GeoData",function(n,t,i){n.save=function(){i.save(n.project,function(){t.path("/geo")})}}],r=["$scope",function(n){function i(n,i){if(myCollection.add(n.geoObjects),i===!0){console.log(myCollection.getLength());var r=new ymaps.GeoObjectCollection({},{});myCollection.each(function(n){n.each(function(n){var i=n.geometry.getCoordinates();ymaps.route([t.getCenter(),i]).then(function(n){r.add(n),console.log(r.getLength()),r.getLength()===23&&t.geoObjects.add(r)})})})}}function r(n){alert(n)}function u(n,t){ymaps.geoXml.load("http://maps.yandex.ua/export/usermaps/"+n+"/").then(function(n){i(n,t)},r)}var t;n.mapForm={isMapLoaded:!1},n.initialize=function(){ymaps.ready(function(){ymaps.geolocation||(ymaps.geolocation={latitude:55.76,longitude:37.64,zoom:10}),t=new ymaps.Map("map",{center:[ymaps.geolocation.latitude,ymaps.geolocation.longitude],zoom:5}),t.controls.add(new ymaps.control.ZoomControl),t.behaviors.enable(["scrollZoom","dblClickZoom"]),n.$$phase||n.$apply(function(){n.mapForm.isMapLoaded=!0});var i=new ymaps.GeoObject({geometry:{type:"Circle",coordinates:[ymaps.geolocation.latitude,ymaps.geolocation.longitude],radius:1e5}});t.geoObjects.add(i)})},n.findPlace=function(){n.mapForm.isMapLoaded===!0&&ymaps.geocode($scope.startPointName,{results:1}).then(function(n){var e=n.geoObjects.get(0),o,h,r,i,f,s;if(e!==null)for(o=e.geometry.getCoordinates(),t.setCenter(o,7,{duration:1}),h=new ymaps.GeoObjectCollection({},{preset:"twirl#brownStretchyIcon",geoObjectCursor:"point"}),r=["EraqyPO94sOvKxc6kNQ2XbMHO7EJJR0R","t3pjobj4S1hssyQjYPRKI1DGSCQkU9iI"],i=0,f=r.length;i<f;i+=1)s=i===f-1,u(r[i],s)})}}];n.when("/map",{controller:r,templateUrl:"/map.html"}).when("/geo",{controller:t,templateUrl:"/geo.html"}).when("/create",{controller:i,templateUrl:"/create.html"}).otherwise({redirectTo:"/geo"})}]),app.run(function(n){console.log(n)});
//@ sourceMappingURL=project.min.js.map